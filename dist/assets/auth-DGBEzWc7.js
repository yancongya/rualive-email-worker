import{b as A,j as e,r}from"./client-Dv1YTpHR.js";import{R as T}from"./LogoAnimation-B3HyV7h6.js";import"./index-C8pce-KX.js";const j=["你今天动了吗？","活着，就是为了做动画","别让你的动画'死'在半路上","搬砖也要搬得有仪式感","你的动画搭子正在看着你","猝死是不可能猝死的","今天也是努力搬砖的一天呢","动画师永不言弃","活着真好","你还在做动画吗？","为了梦想，加油","你的努力，我都记着呢","动画师，冲鸭！","活着，才有动画"],R=()=>e.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden bg-dark",children:[e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle, rgba(255, 255, 255, 0.08) 1.5px, transparent 1.5px)",backgroundSize:"40px 40px"}}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center overflow-visible opacity-20",children:e.jsx("svg",{viewBox:"0 0 800 800",className:"w-[80vw] h-[80vw] sm:w-[60vw] sm:h-[60vw] text-primary rotate-12 scale-100",children:e.jsx("path",{d:"M 0,400 C 100,400 120,200 160,200 C 250,200 350,600 450,600 C 550,600 700,400 800,400",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"16 16",strokeLinecap:"round",className:"animate-marching-ants"})})})]}),b={EN:{navBackToHome:"BACK TO HOME",welcomeBack:"WELCOME BACK",startSurviving:"START SURVIVING",loginSubtitle:"Continue your animation journey",registerSubtitle:"Register to start survival monitoring",usernameLabel:"Username",emailLabel:"Email",passwordLabel:"Password",forgotPassword:"Forgot password?",loginBtn:"LOGIN",registerBtn:"CREATE ACCOUNT",processing:"Processing...",noAccount:"No account yet?",hasAccount:"Already have an account?",registerNow:"REGISTER NOW",loginNow:"LOGIN NOW",resetPassword:"RESET PASSWORD",resetPasswordDesc:"Need to reset password? Contact admin:",resetPasswordNote:"Admin will assist you with password reset",backToLogin:"BACK TO LOGIN",loginSuccess:"Login successful!",registerSuccess:"Registration successful!",fillAllFields:"Please fill all required fields",authFailed:"Authentication failed, please try again",networkError:"Network error, please check connection and try again",placeholderUsername:"Keyframe Master",placeholderEmail:"animator@rualive.com",placeholderPassword:"•••••••••",footerCopy:"© 2026 RuAlive@烟囱鸭. Living for animation."},ZH:{navBackToHome:"返回首页",welcomeBack:"欢迎回来",startSurviving:"开始存活",loginSubtitle:"继续你的动画受难之旅",registerSubtitle:"注册以开启生存状态监测",usernameLabel:"用户名",emailLabel:"邮箱",passwordLabel:"密码",forgotPassword:"忘记密码？",loginBtn:"登录",registerBtn:"创建账户",processing:"处理中...",noAccount:"还没有账号？",hasAccount:"已经有账号了？",registerNow:"立即注册",loginNow:"立即登录",resetPassword:"重置密码",resetPasswordDesc:"需要重置密码？请联系管理员：",resetPasswordNote:"管理员将协助您完成密码重置流程",backToLogin:"返回登录",loginSuccess:"登录成功！",registerSuccess:"注册成功！",fillAllFields:"请填写所有必填字段",authFailed:"认证失败，请重试",networkError:"网络错误，请检查连接后重试",placeholderUsername:"K帧高手",placeholderEmail:"animator@rualive.com",placeholderPassword:"•••••••••",footerCopy:"© 2026 RuAlive@烟囱鸭. 活着，为了做动画."}},B=async s=>{try{const d=s.toLowerCase(),p=await fetch(`/locals/auth/${d}.json`);return p.ok?await p.json():(console.error(`Failed to load ${s} translations`),b[s])}catch(d){return console.error(`Error loading ${s} translations:`,d),b[s]}},O=()=>{const[s,d]=r.useState(!0),[p,h]=r.useState(!1),[y,v]=r.useState([]),[n,w]=r.useState(!1),[N,u]=r.useState(null),[x,S]=r.useState(()=>{const o=new URLSearchParams(window.location.search).get("lang");if(o==="en"||o==="EN")return"EN";if(o==="zh"||o==="ZH")return"ZH";const l=localStorage.getItem("rualive_lang");return l==="EN"||l==="ZH"?l:"ZH"}),[t,L]=r.useState(b[x]),E=r.useRef(0),m=r.useRef(null);r.useEffect(()=>{(async()=>{const o=await B(x);o&&(L(o),localStorage.setItem("rualive_lang",x))})()},[x]),r.useEffect(()=>{new URLSearchParams(window.location.search).get("mode")==="register"&&d(!1)},[]);const f=r.useCallback(a=>{if(!a.target.closest("button, input, a, label")&&Math.random()<.25){const l=++E.current;v(i=>[...i,{id:l,x:a.clientX,y:a.clientY,text:j[Math.floor(Math.random()*j.length)]}]),setTimeout(()=>v(i=>i.filter(g=>g.id!==l)),1500)}},[]);r.useEffect(()=>(window.addEventListener("click",f),()=>window.removeEventListener("click",f)),[f]),r.useEffect(()=>{window.gsap&&m.current&&window.gsap.fromTo(m.current,{opacity:0,y:20,scale:.95},{opacity:1,y:0,scale:1,duration:.8,ease:"power4.out"})},[s]);const C=()=>{u(null),window.gsap&&m.current?window.gsap.to(m.current,{opacity:0,x:s?-20:20,duration:.3,ease:"power2.in",onComplete:()=>{d(!s),window.gsap.fromTo(m.current,{opacity:0,x:s?20:-20},{opacity:1,x:0,duration:.5,ease:"power2.out"})}}):d(!s)},P=async a=>{a.preventDefault(),u(null),w(!0);const o=a.target,l={email:o.elements.namedItem("email").value,password:o.elements.namedItem("password").value,...s?{}:{username:o.elements.namedItem("username").value}};if(!l.email||!l.password){u(t.fillAllFields),w(!1);return}try{const i=window.location.origin,g=s?`${i}/api/auth/login`:`${i}/api/auth/register`,k=await fetch(g,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}),c=await k.json();k.ok?(c.token&&localStorage.setItem("rualive_token",c.token),c.user&&localStorage.setItem("rualive_user",JSON.stringify(c.user)),alert(s?t.loginSuccess:t.registerSuccess),c.user&&c.user.role==="admin"?window.location.href="/admin":window.location.href="/user"):u(c.error||c.message||t.authFailed)}catch(i){console.error("[Auth] Network error:",i),u(t.networkError)}finally{w(!1)}};return e.jsxs("div",{className:"h-screen w-screen flex flex-col items-center justify-center relative overflow-hidden font-sans",children:[e.jsx(R,{}),y.map(a=>e.jsx("div",{style:{left:a.x,top:a.y},className:"fixed pointer-events-none -translate-x-1/2 z-[100] text-primary font-black italic text-base sm:text-2xl tracking-tighter select-none animate-float-up-fade mix-blend-screen",children:a.text},a.id)),e.jsx("nav",{className:"fixed top-0 w-full z-[60] h-14 flex items-center bg-dark/20 backdrop-blur-sm border-b border-white/5",children:e.jsxs("div",{className:"container mx-auto px-6 flex items-center justify-between",children:[e.jsxs("a",{href:"/",className:"flex items-center gap-2 group",children:[e.jsx("div",{className:"w-8 h-8",children:e.jsx(T,{className:"w-full h-full"})}),e.jsx("span",{className:"text-xl font-black tracking-tighter uppercase italic",children:"RuAlive"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("a",{href:"/",className:"text-[10px] font-black uppercase tracking-widest opacity-60 hover:opacity-100 hover:text-primary transition-all",children:t.navBackToHome}),e.jsx("button",{onClick:()=>S(a=>a==="ZH"?"EN":"ZH"),className:"hover:bg-white/10 transition-colors border border-white/10 px-2 py-0.5 rounded text-[9px] uppercase font-bold",children:x==="zh"?"EN":"ZH"})]})]})}),e.jsxs("div",{className:"relative z-10 w-full max-w-md px-6",children:[e.jsxs("div",{ref:m,className:"glass-card rounded-[2rem] p-8 sm:p-12",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsxs("h2",{className:"text-3xl sm:text-4xl font-black italic uppercase tracking-tighter mb-2",children:[s?t.welcomeBack:t.startSurviving,e.jsx("span",{className:"text-primary",children:"."})]}),e.jsx("p",{className:"text-white/40 text-xs font-bold italic uppercase tracking-wider",children:s?t.loginSubtitle:t.registerSubtitle})]}),N&&e.jsx("div",{className:"mb-6 p-4 rounded-xl bg-red-500/10 border border-red-500/30 text-red-400 text-xs font-bold text-center",children:N}),e.jsxs("form",{className:"space-y-5",onSubmit:P,autoComplete:"off",children:[!s&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-white/40 ml-1",children:t.usernameLabel}),e.jsx("input",{type:"text",name:"username",placeholder:t.placeholderUsername,className:"input-field w-full h-12 px-4 rounded-xl font-bold text-sm",autoComplete:"username",disabled:n})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-white/40 ml-1",children:t.emailLabel}),e.jsx("input",{type:"email",name:"email",placeholder:t.placeholderEmail,className:"input-field w-full h-12 px-4 rounded-xl font-bold text-sm",autoComplete:"email",disabled:n})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between items-end mb-1",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-white/40 ml-1",children:t.passwordLabel}),s&&e.jsx("button",{onClick:()=>h(!0),className:"text-[9px] font-black uppercase tracking-tighter text-primary/60 hover:text-primary transition-colors",disabled:n,children:t.forgotPassword})]}),e.jsx("input",{type:"password",name:"password",placeholder:t.placeholderPassword,className:"input-field w-full h-12 px-4 rounded-xl font-bold text-sm",autoComplete:s?"current-password":"new-password",disabled:n})]}),e.jsx("button",{type:"submit",className:`w-full bg-primary hover:bg-primary-light text-white h-14 rounded-2xl font-black italic uppercase tracking-wider text-sm shadow-xl shadow-primary/20 transition-all active:scale-95 mt-4 ${n?"opacity-50 cursor-not-allowed":""}`,disabled:n,children:n?t.processing:s?t.loginBtn:t.registerBtn})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-white/30 text-[11px] font-bold italic",children:[s?t.noAccount:t.hasAccount,e.jsx("button",{onClick:C,className:"ml-2 text-primary hover:text-primary-light font-black uppercase underline decoration-primary/20",disabled:n,children:s?t.registerNow:t.loginNow})]})})]}),e.jsx("div",{className:"mt-8 text-center opacity-30",children:e.jsx("p",{className:"text-[9px] font-black uppercase tracking-[0.2em] italic",children:t.footerCopy})})]}),p&&e.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 sm:p-6 bg-black/60 backdrop-blur-sm",children:e.jsxs("div",{ref:m,className:"glass-card rounded-[1.5rem] sm:rounded-[2rem] p-4 sm:p-6 md:p-8 lg:p-12 w-full max-w-[95vw] sm:max-w-md shadow-2xl relative",children:[e.jsx("button",{onClick:()=>h(!1),className:"absolute top-3 right-3 sm:top-4 sm:right-4 text-white/40 hover:text-white transition-colors",children:e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"text-center mb-4 sm:mb-6 md:mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 bg-primary/20 rounded-full mb-3 sm:mb-4",children:e.jsxs("svg",{className:"w-6 h-6 sm:w-7 sm:h-7 md:w-8 md:h-8 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.667 15h4.666"})]})}),e.jsxs("h3",{className:"text-xl sm:text-2xl md:text-3xl font-black italic uppercase tracking-tighter mb-1 sm:mb-2",children:[t.resetPassword,e.jsx("span",{className:"text-primary",children:"."})]}),e.jsx("p",{className:"text-white/40 text-[10px] sm:text-xs font-bold italic uppercase tracking-wider hidden sm:block",children:"PASSWORD RESET PROTOCOL"})]}),e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"p-3 sm:p-4 bg-white/5 border border-white/10 rounded-xl",children:[e.jsx("p",{className:"text-white/80 text-xs sm:text-sm font-mono text-center leading-relaxed",children:t.resetPasswordDesc}),e.jsx("p",{className:"text-primary font-black text-base sm:text-lg text-center mt-2 sm:mt-3",children:"2655283737@qq.com"})]}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-white/30 text-[10px] sm:text-[11px] font-bold italic",children:t.resetPasswordNote})}),e.jsx("button",{onClick:()=>h(!1),className:"w-full bg-white/10 hover:bg-white/20 text-white h-10 sm:h-12 rounded-xl font-bold text-xs sm:text-sm uppercase tracking-wider transition-all",children:t.backToLogin})]})]})})]})};A.createRoot(document.getElementById("root")).render(e.jsx(O,{}));
