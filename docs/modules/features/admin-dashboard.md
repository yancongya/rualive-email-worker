# 管理后台功能列表

> 生成时间: 2026-01-30  
> 用途: 管理后台功能模块参考

---

## 页面结构

当前管理后台为单页面应用（SPA），包含以下主要功能模块：

```
/admin
├── 邀请码管理 (Invite Codes)
├── 用户管理 (Users)
├── API密钥管理 (API Key)
└── 邮件发送日志 (Email Logs)
```

---

## 功能模块详细说明

### 1. 邀请码管理

#### 功能列表
- 查看所有邀请码列表
- 创建新邀请码（可设置最大使用次数和有效期）
- 删除邀请码
- 查看邀请码使用状态（已用次数/最大次数）

#### 用户体验流程
1. 管理员登录后台
2. 切换到"邀请码管理"标签页
3. 查看当前所有邀请码列表（包含使用状态）
4. 点击"创建邀请码"按钮，输入参数
5. 生成新的邀请码，可复制分享给用户
6. 删除不再需要的邀请码

---

### 2. 用户管理

#### 功能列表
- 查看所有用户列表
- 查看用户详情（基本信息、邮件统计、邮件限制）
- 删除用户
- 重置用户密码（支持自动生成或手动设置）
- 查看用户邮件发送统计
- 设置用户邮件发送限制

#### 用户体验流程
1. 管理员查看所有注册用户列表
2. 点击用户查看详细信息
3. 可执行以下操作：
   - 删除用户（需二次确认）
   - 重置密码（自动生成或手动设置）
   - 查看邮件统计和限制状态
   - 设置每日邮件发送限制

---

### 3. Resend API密钥管理

#### 功能列表
- 查看当前API密钥（脱敏显示，也可点击进行显示查看）
- 设置新API密钥而不是进行生成
- 删除API密钥
- 测试API密钥连接

#### 用户体验流程
1. 查看当前配置的API密钥（默认脱敏显示）
2. 点击显示按钮查看完整密钥
3. 点击"设置新密钥"输入新的API密钥
4. 点击"测试"按钮验证密钥是否有效
5. 删除不再使用的密钥

---

### 4. 邮件发送日志

#### 功能列表
- 查看所有邮件发送日志
- 查看邮件发送统计（总数、成功、失败）
- 按用户筛选邮件日志
- 查看邮件发送详情（收件人、主题、时间、状态）

#### 用户体验流程
1. 查看邮件发送统计概览
2. 浏览邮件发送日志列表
3. 按用户筛选特定用户的邮件记录
4. 查看邮件发送详情（成功/失败、错误信息）

---

## 公共API（需要认证）

以下API所有用户（包括管理员和普通用户）都可以访问：

| 端点 | 方法 | 功能 |
|------|------|------|
| `/api/auth/login` | POST | 用户登录 |
| `/api/auth/logout` | POST | 用户登出 |
| `/api/auth/user` | GET | 获取当前用户信息 |
| `/api/auth/change-password` | POST | 修改密码 |
| `/api/config` | GET | 获取用户配置 |
| `/api/config` | POST | 更新用户配置 |
| `/api/work-data` | POST | 上传工作数据 |
| `/api/send-now` | POST | 立即发送邮件 |
| `/api/projects/summary` | GET | 获取项目汇总 |
| `/api/projects/history` | GET | 获取项目历史 |

---

## 认证说明

所有管理后台API都需要管理员权限认证：

**请求头：**
```
Authorization: Bearer <token>
```

**认证流程：**
1. 用户登录获取token
2. 将token存储在 `localStorage['rualive_token']`
3. 每次请求在请求头中携带token
4. 后端验证token和用户角色（role: 'admin'）

---

## 设计建议

### 前端设计要点
1. **Tab切换**：使用Tab组件切换不同功能模块
2. **权限控制**：根据用户角色显示/隐藏管理功能
3. **加载状态**：所有API调用都应显示加载状态
4. **错误处理**：统一的错误提示机制
5. **确认操作**：删除用户、重置密码等危险操作需要二次确认
6. **实时更新**：考虑使用WebSocket或轮询实现实时数据更新

### UI/UX 建议
1. **响应式设计**：支持桌面和移动端
2. **暗色主题**：保持与整体风格一致
3. **模态窗**：详情查看、确认操作使用模态窗
4. **数据可视化**：邮件统计可使用图表展示
5. **搜索过滤**：用户列表支持搜索和过滤功能

---

## 安全考虑

1. **敏感操作确认**：删除用户、重置密码等操作需要二次确认
2. **密码生成**：自动生成的密码应符合安全规范（12位随机字符）
3. **API密钥保护**：密钥默认脱敏显示，避免泄露
4. **权限验证**：所有管理API后端必须验证管理员权限
5. **操作日志**：记录所有管理操作，便于审计

---

**文档版本**: 1.0  
**最后更新**: 2026-01-30