import{R as C,j as e,r as a}from"./client-Crikcsvy.js";const g=["你今天动了吗？","活着，就是为了做动画","别让你的动画'死'在半路上","搬砖也要搬得有仪式感","你的动画搭子正在看着你","猝死是不可能猝死的","今天也是努力搬砖的一天呢","动画师永不言弃","活着真好","你还在做动画吗？","为了梦想，加油","你的努力，我都记着呢","动画师，冲鸭！","活着，才有动画"],L=()=>e.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden bg-dark",children:[e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle, rgba(255, 255, 255, 0.08) 1.5px, transparent 1.5px)",backgroundSize:"40px 40px"}}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center overflow-visible opacity-20",children:e.jsx("svg",{viewBox:"0 0 800 800",className:"w-[80vw] h-[80vw] sm:w-[60vw] sm:h-[60vw] text-primary rotate-12 scale-100",children:e.jsx("path",{d:"M 0,400 C 100,400 120,200 160,200 C 250,200 350,600 450,600 C 550,600 700,400 800,400",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"16 16",strokeLinecap:"round",className:"animate-marching-ants"})})})]}),S=()=>{const[t,u]=a.useState(!0),[j,m]=a.useState(!1),[v,f]=a.useState([]),[r,x]=a.useState(!1),[w,c]=a.useState(null),k=a.useRef(0),n=a.useRef(null),p=a.useCallback(s=>{if(!s.target.closest("button, input, a, label")&&Math.random()<.25){const o=++k.current;f(i=>[...i,{id:o,x:s.clientX,y:s.clientY,text:g[Math.floor(Math.random()*g.length)]}]),setTimeout(()=>f(i=>i.filter(h=>h.id!==o)),1500)}},[]);a.useEffect(()=>(window.addEventListener("click",p),()=>window.removeEventListener("click",p)),[p]),a.useEffect(()=>{window.gsap&&n.current&&window.gsap.fromTo(n.current,{opacity:0,y:20,scale:.95},{opacity:1,y:0,scale:1,duration:.8,ease:"power4.out"})},[t]);const N=()=>{c(null),window.gsap&&n.current?window.gsap.to(n.current,{opacity:0,x:t?-20:20,duration:.3,ease:"power2.in",onComplete:()=>{u(!t),window.gsap.fromTo(n.current,{opacity:0,x:t?20:-20},{opacity:1,x:0,duration:.5,ease:"power2.out"})}}):u(!t)},y=async s=>{s.preventDefault(),c(null),x(!0);const d=s.target,o={email:d.elements.namedItem("email").value,password:d.elements.namedItem("password").value,...t?{}:{username:d.elements.namedItem("username").value}};if(!o.email||!o.password){c("请填写所有必填字段"),x(!1);return}try{const i=window.location.origin,h=t?`${i}/api/auth/login`:`${i}/api/auth/register`,b=await fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),l=await b.json();b.ok?(l.token&&localStorage.setItem("rualive_token",l.token),l.user&&localStorage.setItem("rualive_user",JSON.stringify(l.user)),alert(t?"登录成功！":"注册成功！"),l.user&&l.user.role==="admin"?window.location.href="/admin":window.location.href="/user"):c(l.error||l.message||"认证失败，请重试")}catch(i){console.error("[Auth] Network error:",i),c("网络错误，请检查连接后重试")}finally{x(!1)}};return e.jsxs("div",{className:"h-screen w-screen flex flex-col items-center justify-center relative overflow-hidden font-sans",children:[e.jsx(L,{}),v.map(s=>e.jsx("div",{style:{left:s.x,top:s.y},className:"fixed pointer-events-none -translate-x-1/2 z-[100] text-primary font-black italic text-base sm:text-2xl tracking-tighter select-none animate-float-up-fade mix-blend-screen",children:s.text},s.id)),e.jsx("nav",{className:"fixed top-0 w-full z-[60] h-14 flex items-center bg-dark/20 backdrop-blur-sm border-b border-white/5",children:e.jsxs("div",{className:"container mx-auto px-6 flex items-center justify-between",children:[e.jsxs("a",{href:"index.html",className:"flex items-center gap-2 group",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center rotate-3 shadow-lg group-hover:rotate-0 transition-transform",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"3",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),e.jsx("span",{className:"text-xl font-black tracking-tighter uppercase italic",children:"RuAlive"})]}),e.jsx("a",{href:"index.html",className:"text-[10px] font-black uppercase tracking-widest opacity-60 hover:opacity-100 hover:text-primary transition-all",children:"返回首页 BACK TO HOME"})]})}),e.jsxs("div",{className:"relative z-10 w-full max-w-md px-6",children:[e.jsxs("div",{ref:n,className:"glass-card rounded-[2rem] p-8 sm:p-12",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsxs("h2",{className:"text-3xl sm:text-4xl font-black italic uppercase tracking-tighter mb-2",children:[t?"欢迎回来":"开始存活",e.jsx("span",{className:"text-primary",children:"."})]}),e.jsx("p",{className:"text-white/40 text-xs font-bold italic uppercase tracking-wider",children:t?"继续你的动画受难之旅":"注册以开启生存状态监测"})]}),w&&e.jsx("div",{className:"mb-6 p-4 rounded-xl bg-red-500/10 border border-red-500/30 text-red-400 text-xs font-bold text-center",children:w}),e.jsxs("form",{className:"space-y-5",onSubmit:y,autoComplete:"off",children:[!t&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-white/40 ml-1",children:"用户名 Username"}),e.jsx("input",{type:"text",name:"username",placeholder:"K帧高手",className:"input-field w-full h-12 px-4 rounded-xl font-bold text-sm",autoComplete:"username",disabled:r})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-white/40 ml-1",children:"邮箱 Email"}),e.jsx("input",{type:"email",name:"email",placeholder:"animator@rualive.com",className:"input-field w-full h-12 px-4 rounded-xl font-bold text-sm",autoComplete:"email",disabled:r})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between items-end mb-1",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-white/40 ml-1",children:"密码 Password"}),t&&e.jsx("button",{onClick:()=>m(!0),className:"text-[9px] font-black uppercase tracking-tighter text-primary/60 hover:text-primary transition-colors",disabled:r,children:"忘记密码？"})]}),e.jsx("input",{type:"password",name:"password",placeholder:"•••••••••",className:"input-field w-full h-12 px-4 rounded-xl font-bold text-sm",autoComplete:t?"current-password":"new-password",disabled:r})]}),e.jsx("button",{type:"submit",className:`w-full bg-primary hover:bg-primary-light text-white h-14 rounded-2xl font-black italic uppercase tracking-wider text-sm shadow-xl shadow-primary/20 transition-all active:scale-95 mt-4 ${r?"opacity-50 cursor-not-allowed":""}`,disabled:r,children:r?"处理中...":t?"登录 LOGIN":"创建账户 CREATE ACCOUNT"})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-white/30 text-[11px] font-bold italic",children:[t?"还没有账号？":"已经有账号了？",e.jsx("button",{onClick:N,className:"ml-2 text-primary hover:text-primary-light font-black uppercase underline decoration-primary/20",disabled:r,children:t?"立即注册 REGISTER":"立即登录 LOGIN"})]})})]}),e.jsx("div",{className:"mt-8 text-center opacity-30",children:e.jsx("p",{className:"text-[9px] font-black uppercase tracking-[0.2em] italic",children:"© 2026 RuAlive@烟囱鸭. 活着，为了做动画."})})]}),j&&e.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 sm:p-6 bg-black/60 backdrop-blur-sm",children:e.jsxs("div",{ref:n,className:"glass-card rounded-[1.5rem] sm:rounded-[2rem] p-4 sm:p-6 md:p-8 lg:p-12 w-full max-w-[95vw] sm:max-w-md shadow-2xl relative",children:[e.jsx("button",{onClick:()=>m(!1),className:"absolute top-3 right-3 sm:top-4 sm:right-4 text-white/40 hover:text-white transition-colors",children:e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"text-center mb-4 sm:mb-6 md:mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 bg-primary/20 rounded-full mb-3 sm:mb-4",children:e.jsxs("svg",{className:"w-6 h-6 sm:w-7 sm:h-7 md:w-8 md:h-8 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.667 15h4.666"})]})}),e.jsxs("h3",{className:"text-xl sm:text-2xl md:text-3xl font-black italic uppercase tracking-tighter mb-1 sm:mb-2",children:["重置密码",e.jsx("span",{className:"text-primary",children:"."})]}),e.jsx("p",{className:"text-white/40 text-[10px] sm:text-xs font-bold italic uppercase tracking-wider hidden sm:block",children:"PASSWORD RESET PROTOCOL"})]}),e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"p-3 sm:p-4 bg-white/5 border border-white/10 rounded-xl",children:[e.jsx("p",{className:"text-white/80 text-xs sm:text-sm font-mono text-center leading-relaxed",children:"需要重置密码？请联系管理员："}),e.jsx("p",{className:"text-primary font-black text-base sm:text-lg text-center mt-2 sm:mt-3",children:"2655283737@qq.com"})]}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-white/30 text-[10px] sm:text-[11px] font-bold italic",children:"管理员将协助您完成密码重置流程"})}),e.jsx("button",{onClick:()=>m(!1),className:"w-full bg-white/10 hover:bg-white/20 text-white h-10 sm:h-12 rounded-xl font-bold text-xs sm:text-sm uppercase tracking-wider transition-all",children:"返回登录"})]})]})})]})};C.createRoot(document.getElementById("root")).render(e.jsx(S,{}));
